<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Treasure Hunt Game</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="shortcut icon" href="#">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f9fa;
      padding: 20px;
    }
    h1 {
      color: #343a40;
    }
    #locations, #score, #help {
      font-weight: bold;
      margin-top: 10px;
    }
    .game-field {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin-top: 20px;
    }
    .location {
      width: 100px;
      height: 100px;
      border: 1px solid #ccc;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #fff;
    }
    .location img {
      max-width: 100%;
      max-height: 100%;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <h1 class="text-center">Siddharth digs for treasure</h1>

    <!-- Instructions -->
    <div class="alert alert-info">
      <p>Click on the locations to find silver and gold, watch out for the rattlesnake!</p>
    </div>

    <!-- Locations Checked -->
    <p>Number of locations checked: <span id="locations">0</span></p>
    <p>Score: <span id="score">0</span></p>

    <!-- Help Button -->
    <button id="help-button" onclick="displayHelp()">Click for help</button>
    <p id="help-result"></p>

    <!-- Game Field -->
    <div class="game-field">
      <!-- Row 1 -->
      <div class="row">
        <div class="location" id="img1" onclick="check(0)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img2" onclick="check(1)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img3" onclick="check(2)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img4" onclick="check(3)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img5" onclick="check(4)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img6" onclick="check(5)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img7" onclick="check(6)"><img src="cactus.webp" alt="Cactus"></div>
      </div>
      <!-- Row 2 -->
      <div class="row">
        <div class="location" id="img8" onclick="check(7)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img9" onclick="check(8)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img10" onclick="check(9)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img11" onclick="check(10)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img12" onclick="check(11)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img13" onclick="check(12)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img14" onclick="check(13)"><img src="cactus.webp" alt="Cactus"></div>
      </div>
      <!-- Row 3 -->
      <div class="row">
        <div class="location" id="img15" onclick="check(14)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img16" onclick="check(15)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img17" onclick="check(16)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img18" onclick="check(17)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img19" onclick="check(18)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img20" onclick="check(19)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img21" onclick="check(20)"><img src="cactus.webp" alt="Cactus"></div>
      </div>
      <!-- Row 4 -->
      <div class="row">
        <div class="location" id="img22" onclick="check(21)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img23" onclick="check(22)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img24" onclick="check(23)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img25" onclick="check(24)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img26" onclick="check(25)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img27" onclick="check(26)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img28" onclick="check(27)"><img src="cactus.webp" alt="Cactus"></div>
      </div>
      <!-- Row 5 -->
      <div class="row">
        <div class="location" id="img29" onclick="check(28)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img30" onclick="check(29)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img31" onclick="check(30)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img32" onclick="check(31)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img33" onclick="check(32)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img34" onclick="check(33)"><img src="cactus.webp" alt="Cactus"></div>
        <div class="location" id="img35" onclick="check(34)"><img src="cactus.webp" alt="Cactus"></div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS (Optional) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const ids = new Array(35);
    let score = 0;
    let locationsVisited = 0;
    let lastLocation = 0;
    let silverLocations = [];
    let goldLocation;
    let snakeLocation;
    let gameOver = false;

    // Populate the ids array with correct values
    for (let i = 0; i < ids.length; i++) {
      ids[i] = `img${i + 1}`; // img1, img2, ..., img35
    }

    // Initialize random locations for silver, gold, and snake
    function initializeLocations() {
      // Generate 5 unique random locations for silver
      while (silverLocations.length < 5) {
        const randomLocation = Math.floor(Math.random() * 35);
        if (!silverLocations.includes(randomLocation)) {
          silverLocations.push(randomLocation);
        }
      }

      // Generate random location for gold
      goldLocation = Math.floor(Math.random() * 35);

      // Generate random location for snake
      snakeLocation = Math.floor(Math.random() * 35);

      console.log("Silver Locations:", silverLocations);
      console.log("Gold Location:", goldLocation);
      console.log("Snake Location:", snakeLocation);
    }

    // Move the snake diagonally (wrapping around the edges)
    function moveSnake() {
      const col = snakeLocation % 7; // Column of the snake
      const row = Math.floor(snakeLocation / 7); // Row of the snake

      // Move diagonally (down-right)
      const newRow = (row + 1) % 5; // Wrap around rows
      const newCol = (col + 1) % 7; // Wrap around columns
      snakeLocation = newRow * 7 + newCol;

      console.log("Snake moved to:", snakeLocation);

      // Check if the snake lands on the player
      if (snakeLocation === lastLocation) {
        gameOver = true;
        alert("Game Over! The snake caught you.");
      }
    }

    // Function to handle clicks on the game board
    function check(position) {
      if (gameOver) {
        alert("Game Over! Please refresh the page to play again.");
        return;
      }

      const element = document.getElementById(ids[position]);
      const imgElement = element.querySelector("img"); // Get the <img> inside the tile

      console.log(`Clicked position: ${position}`);

      if (position === goldLocation) {
        imgElement.src = "goldnugget.jpeg"; // Change image to gold
        console.log("Gold found at position:", position);
        score += 5;
      } else if (silverLocations.includes(position)) {
        imgElement.src = "silver.jpg"; // Change image to silver
        console.log("Silver found at position:", position);
        score += 3;
      } else if (position === snakeLocation) {
        imgElement.src = "snake.jpg"; // Change image to snake
        console.log("Snake found at position:", position);
        gameOver = true;
        score -= 3;
        alert("Game Over! You stepped on the snake.");
      } else {
        imgElement.src = "pottery.jpeg"; // Change image to pottery
        console.log("Pottery found at position:", position);
        score += 1;
      }

      locationsVisited += 1;
      lastLocation = position;

      // Update the score and locations visited
      document.getElementById("score").textContent = score;
      document.getElementById("locations").textContent = locationsVisited;

      // Move the snake after each click
      moveSnake();
    }

    // Function to provide help based on the last clicked location
    function help() {
      const col = lastLocation % 7; // Column is the remainder when divided by 7
      const row = Math.floor(lastLocation / 7); // Row is the quotient when divided by 7

      console.log(`Last Location: ${lastLocation}, Row: ${row}, Col: ${col}`);

      // Check the four closest locations (with wrap-around)
      const closestLocations = [
        (lastLocation - 1 + 35) % 35, // Left (wrap around if necessary)
        (lastLocation + 1) % 35, // Right (wrap around if necessary)
        (lastLocation - 7 + 35) % 35, // Top (wrap around if necessary)
        (lastLocation + 7) % 35, // Bottom (wrap around if necessary)
      ];

      console.log("Closest Locations:", closestLocations);

      // Check if any of the closest locations are in silverLocations
      for (const loc of closestLocations) {
        if (silverLocations.includes(loc)) {
          console.log("Clink! Silver is nearby.");
          return "clink";
        }
      }

      // Check if the last location is next to the snake
      const snakeCol = snakeLocation % 7; // Column of the snake
      const snakeRow = Math.floor(snakeLocation / 7); // Row of the snake

      console.log(`Snake Location: ${snakeLocation}, Row: ${snakeRow}, Col: ${snakeCol}`);

      if (Math.abs(row - snakeRow) <= 1 && Math.abs(col - snakeCol) <= 1) {
        console.log("Rattle! Snake is nearby.");
        return "rattle";
      }

      // If none of the above, return "wind"
      console.log("Wind! Nothing nearby.");
      return "wind";
    }

    // Function to display the help result
    function displayHelp() {
      if (gameOver) {
        alert("Game Over! Please refresh the page to play again.");
        return;
      }

      const helpResult = help(); // Call the help function
      const helpElement = document.getElementById("help-result");
      helpElement.textContent = `Help result: ${helpResult}`;

      console.log("Help Result:", helpResult);
    }

    // Initialize the game
    initializeLocations();
  </script>
</body>
</html>